{"version":3,"file":"static/webpack/static/development/pages/blog/react-native-uncontrollable-text-input.js.db2391a94d4fbb9ae39f.hot-update.js","sources":["webpack:///./pages/blog/react-native-uncontrollable-text-input.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { NextPage } from 'next';\nimport router from 'next/router';\n// import { UAParser } from 'ua-parser-js';\nimport Prism from 'prismjs';\n\nimport { Layout } from '../../components/Layout';\nimport '../../assets/styles.styl';\n\n// interface IOwnProps {\n//   ua: IUAParser.IResult;\n// }\n\nconst Blog: NextPage = () => {\n  useEffect(() => {\n    Prism.highlightAll();\n  }, []);\n\n  return (\n    <>\n      <Layout title=\"Dmitriy Gurinenko | Dev Blog\">\n        <div className=\"container\">\n          <div className=\"text\">\n            <div>\n              <span className=\"hover\" onClick={router.back}>\n                &#9664;{' '}\n              </span>\n              04/09/2019\n            </div>\n            <div className=\"subtitle\">\n              React Native: uncontrollable TextInput & missed react updates\n            </div>\n            <br />\n            <p>\n              So what is this about?\n              <br />\n              <br />\n              Let's imagine you've already know all the RN basics but every day\n              you try something new with your project. Today I started to code a\n              new form in our current react-native app. After all layout hacks\n              and logic hooks I started to use a simple well-known condition\n              like:\n              <pre>\n                <code className=\"language-javascript\">\n                  {`\n                  <TextInput\n                    onChangeText={setValue}\n                    style={[\n                      styles.input,\n                      {\n                        color: isValid\n                          ? MAIN_COLORS.BLACK\n                          : MAIN_COLORS.ERROR,\n                      },\n                    ]}\n                  />\n          `}\n                </code>\n              </pre>\n              <br />\n              Suddenly I stuck with a simple style prop. It just wasn't updating\n              that color. However when I tried to use an{' '}\n              <code className=\"language-javascript\">isValid</code> constant\n              somewhere else in the same Form (stateless/functional) component,\n              it has been rendered and updated correctly.\n              <br />\n              <br />\n              After a little googling I found a quite old opened issue -{' '}\n              <a href=\"https://github.com/facebook/react-native/issues/20131\">\n                https://github.com/facebook/react-native/issues/20131\n              </a>{' '}\n              where guys explained a way to fix this. You just need to make your\n              TextInput controllable and add a{' '}\n              <code className=\"language-javascript\">value</code> prop. It should\n              use a state value from the{' '}\n              <code className=\"language-javascript\">setValue</code> callback;\n              <br />\n              <br />A full example of a working code:\n              <pre>\n                <code className=\"language-javascript\">\n                  {`\n                  const [value, setValue] = useState();\n\n                  <TextInput\n                    value={value}\n                    onChangeText={setValue}\n                    style={[\n                      styles.input,\n                      {\n                        color: isValid\n                          ? MAIN_COLORS.BLACK\n                          : MAIN_COLORS.ERROR,\n                      },\n                    ]}\n                  />\n          `}\n                </code>\n              </pre>\n            </p>\n          </div>\n        </div>\n      </Layout>\n    </>\n  );\n};\n\n// Blog.getInitialProps = async ({ req }) => {\n//   const userAgent = req ? req.headers['user-agent'] : navigator.userAgent;\n//   const parser = new UAParser(userAgent);\n//   return { ua: parser.getResult() };\n// };\n\nexport default Blog;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;A","sourceRoot":""}